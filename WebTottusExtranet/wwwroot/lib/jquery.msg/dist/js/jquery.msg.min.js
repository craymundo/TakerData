/*! Copyright 2011, Ben Lin (http://dreamerslab.com/)
* Licensed under the MIT License (LICENSE.txt).
*
* Version: 1.0.7
*
* Requires: 
* jQuery 1.3.0+, 
* jQuery Center plugin 1.0.0+ https://github.com/dreamerslab/jquery.center
*/
(function(n,t){var r={},i=0,u,f=[function(){}];n.msg=function(){var o,a,s,l,e,h,c;return s=[].shift.call(arguments),l={}.toString.call(s),e=n.extend({afterBlock:function(){},autoUnblock:!0,center:{topPercentage:.4},css:{},clickUnblock:!0,content:"Please wait...",fadeIn:200,fadeOut:300,bgPath:"",klass:"black-on-white",method:"appendTo",target:"body",timeOut:2400,z:1e3},r),l==="[object Object]"&&n.extend(e,s),h={unblock:function(){for(var i=n("#jquery-msg-overlay").length,t=1;t<=i+2;++t)n("#jquery-msg-overlay").length&&(o=n("#jquery-msg-overlay").fadeOut(e.fadeOut),f[e.msgID](o),o.remove());clearTimeout(u)}},c={unblock:function(n,t){var r=n===undefined?0:n;e.msgID=t===undefined?i:t;setTimeout(function(){h.unblock()},r)},replace:function(t){if({}.toString.call(t)!=="[object String]")throw"$.msg('replace'); error: second argument has to be a string";n("#jquery-msg-content").empty().html(t).center(e.center)},overwriteGlobal:function(n,t){r[n]=t}},i--,e.msgID=e.msgID===undefined?i:e.msgID,f[e.msgID]=e.beforeUnblock===undefined?function(){}:e.beforeUnblock,l==="[object String]"?c[s].apply(c,arguments):(o=n('<div id="jquery-msg-overlay" class="'+e.klass+'" style="position:absolute; z-index:'+e.z+"; top:0px; right:0px; left:0px; height:"+n(t).height()+'px;"><img id="jquery-msg-bg" style="width: 100%; height: 100%; top: 0px; left: 0px;"/><div id="jquery-msg-content" class="jquery-msg-content" style="position:absolute;">'+e.content+"<\/div><\/div>"),o[e.method](e.target),a=n("#jquery-msg-content").center(e.center).css(e.css).hide(),o.hide().fadeIn(e.fadeIn,function(){a.fadeIn("fast").children().bind("click",function(n){n.stopPropagation()});e.afterBlock.call(c,o);e.clickUnblock&&o.bind("click",function(n){n.stopPropagation();h.unblock()});e.autoUnblock&&(u=setTimeout(h.unblock,e.timeOut))})),this}})(jQuery,document);